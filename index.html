<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Japanese Cinema Advent Calendar</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cardo&family=Noto+Serif+JP:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Montserrat', sans-serif;
  background-color: #f5f5f5;
  color: #222;
  text-align: center;
  margin: 0;
  padding: 10px;
}
h1 {
  font-size: 3.2em;
  margin: 20px 0 0.2em 0;
  color: #b22222;
  font-family: 'Cardo', serif;
}
h2 {
  font-family: 'Montserrat', sans-serif;
  font-size: 1.8em;
  font-weight: 400;
  margin-top: 0;
  margin-bottom: 40px; /* more space below headings */
  color: #444;
}

.grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  max-width: 1200px;
  margin: 0 auto 40px auto; /* added space below grid */
}

.square {
  background: #ddd;
  border: 2px solid #bbb;
  border-radius: 50%;
  aspect-ratio: 1/1;
  min-height: 200px;
  cursor: pointer;
  position: relative;
  transition: transform 0.2s;
  overflow: hidden;
}
.square:hover { transform: scale(1.05); }
.square span {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3em;
  color: #b22222;
  font-family: 'Noto Serif JP', serif;
}

.revealed {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #000;
}
.revealed img {
  height: 100%;
  width: 100%;
  object-fit: cover;
  cursor: pointer;
}

/* Modal */
.modal {
  display: none;
  position: fixed;
  z-index: 10;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
}
.modal-content {
  background: #fff;
  color: #222;
  padding: 30px;
  border-radius: 15px;
  max-width: 800px;
  width: 90%;
  max-height: 90vh;
  text-align: left;
  font-size: 1.2rem;
  font-family: 'Montserrat', sans-serif;
  display: flex;
  flex-direction: row;
  overflow: hidden;
  box-sizing: border-box;
  position: relative;
}

.close {
  position: absolute;
  top: 10px; right: 15px;
  font-size: 1.5em;
  cursor: pointer;
  color: #b22222;
}

/* Modal Body */
.modal-body {
  display: flex;
  flex-direction: row;
  gap: 20px;
  height: 100%;
  width: 100%;
  align-items: flex-start;
}
.poster img {
  max-height: 400px;
  width: auto;
  border-radius: 12px;
  object-fit: contain;
}
.film-info {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
#modalTitle {
  font-family: 'Noto Serif JP', serif;
  font-size: 2.2rem;
  margin: 0;
}
#modalYear {
  display: block;
  font-size: 1.4rem;
  opacity: 0.7;
  margin-top: 3px;
}
.stats {
  display: flex;
  gap: 15px;
  align-items: center;
  margin-bottom: 10px;
}
.stats span { display: flex; align-items: center; gap: 5px; }
.stats img.icon { width: 30px; height: 30px; }
.streaming-logo img { width: 100px; height: auto; margin-top: 10px; }

/* Reset */
.squareResetBtn {
  position: absolute;
  top: 5px; right: 5px;
  font-size: 0.8em;
  padding: 2px 5px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background: #b22222;
  color: #fff;
}
#resetBtn {
  margin-top: 20px;
  margin-bottom: 40px; /* extra space from grid */
  font-size: 1em;
  padding: 15px;
  cursor: pointer;
  border-radius: 50%; /* make circular */
  border: none;
  background-color: #b22222;
  color: #fff;
  font-family: 'Montserrat', sans-serif;
  width: 80px;
  height: 80px;
  line-height: 1;
}
</style>
</head>
<body>

<h1>Japanese Cinema Advent Calendar</h1>
<h2>シネマアドベントカレンダー</h2>
<div class="grid" id="calendar"></div>

<!-- Modal -->
<div class="modal" id="filmModal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <div class="modal-body">
      <div class="poster">
        <img id="modalPoster" src="" alt="Film Poster">
      </div>
      <div class="film-info">
        <h3 id="modalTitle">Film Title</h3>
        <span id="modalYear">(Year)</span>
        <p class="stats">
          <span id="runtime"></span>
          <span id="rtScore"><img class="icon" src="images/rotten_icon.png"> RT%</span>
          <span id="lbScore"><img class="icon" src="images/letterboxd_icon.png"> LB%</span>
        </p>
        <p id="modalDesc">Description goes here</p>
        <div id="modalStreaming" class="streaming-logo"></div>
      </div>
    </div>
  </div>
</div>

<button id="resetBtn">RESET</button>

<script>
const calendar = document.getElementById('calendar');
let openedSquares = JSON.parse(localStorage.getItem('openedSquaresJP')) || {};

// Kanji numerals for 1–24 (extend if needed)
const kanjiNumbers = [
  '一','二','三','四','五','六','七','八','九','十',
  '十一','十二','十三','十四','十五','十六','十七','十八','十九','二十',
  '二十一','二十二','二十三','二十四'
];

function createSquare(film, i){
  const square = document.createElement('div');
  square.classList.add('square');
  square.dataset.index = i;
  square.innerHTML = `<span>${kanjiNumbers[i] || (i+1)}</span>`;
  if(openedSquares[i]) revealSquare(square, film);
  square.addEventListener('click', ()=>{
    if(!square.classList.contains('revealed')){
      revealSquare(square, film);
      openedSquares[i] = true;
      localStorage.setItem('openedSquaresJP', JSON.stringify(openedSquares));
    }
  });
  return square;
}

function revealSquare(square, film){
  square.classList.add('revealed');
  square.innerHTML = `<img src="${film.image}" alt="${film.title}"><button class="squareResetBtn">×</button>`;
  const img = square.querySelector('img');
  img.addEventListener('click', e=>{
    e.stopPropagation();
    openModal(film);
  });
  square.querySelector('.squareResetBtn').addEventListener('click', e=>{
    e.stopPropagation();
    square.classList.remove('revealed');
    square.innerHTML = `<span>${kanjiNumbers[parseInt(square.dataset.index)] || (parseInt(square.dataset.index)+1)}</span>`;
    delete openedSquares[square.dataset.index];
    localStorage.setItem('openedSquaresJP', JSON.stringify(openedSquares));
  });
}

  /* ✅ INSERT FILM DATA HERE */
const films = [
  { title: "Spirited Away", year: 2001, image: "images/spirit.jpg", poster: "images/spirit_poster.jpg", runtime: "125 min", rottenScore: "96%", letterboxdScore: "4.4", description: "A young girl gets trapped in a strange world of spirits - Hayao Miyazaki’s dazzling fairytale leaves viewers fascinated by the world around them", streaming: "images/hbo_logo3.png" }, 
  { title: "Ghost in the Shell", year: 1995, image: "images/ghost2.jpg", poster: "images/ghost_poster.jpg", runtime: "83 min", rottenScore: "95%", letterboxdScore: "4.1", description: "In the future, cybernetically enhanced cops investigate a criminal who can hack into people’s brains - Mamoru Oshii’s stunning feat of animation is thoughtful and complex", streaming: "images/criterion_logo.png" },
  { title: "Princess Mononoke", year: 1997, image: "images/mononoke.jpg", poster: "images/mononoke_poster.jpg", runtime: "134 min", rottenScore: "93%", letterboxdScore: "4.4", description: "A cursed prince attempts to bring peace to a conflict that threatens to destroy a sacred forest - Hayao Miyazaki’s epic animation has breathtaking visuals", streaming: "images/hbo_logo3.png" },
  { title: "The Tale of The Princess Kaguya", year: 2013, image: "images/kag2.jpg", poster: "images/kag_poster.jpg", runtime: "137 min", rottenScore: "100%", letterboxdScore: "4.3", description: "Found inside a bamboo stalk, a mysterious princess enthrals all who encounter her - Isao Takahata’s animated treasure boasts narrative depth and exquisite beauty", streaming: "images/hbo_logo3.png" },
  { title: "Still Walking", year: 2008, image: "images/still.jpg", poster: "images/still_poster.jpg", runtime: "114 min", rottenScore: "100%", letterboxdScore: "4.3", description: "A family gathers for a mysterious ceremonial ritual - Hirokazu Kore-eda’s drama casts a delicate, entrancing spell", streaming: "images/criterion_logo.png" },
  { title: "First Love", year: 2019, image: "images/first.jpg", poster: "images/first_poster.jpg", runtime: "108 min", rottenScore: "98%", letterboxdScore: "3.6", description: "Young lovers get caught up in a drug scheme involving corrupt cops, gangsters and assassins - Takashi Miike blends violence, comedy and romance in a wildly entertaining ride", streaming: "images/prime.png" },
  { title: "Cloud", year: 2024, image: "images/cloud.jpg", poster: "images/cloud_poster.jpg", runtime: "124 min", rottenScore: "93%", letterboxdScore: "3.5", description: "A young factory worker hustles into the sinister world of black market reselling. Kiyoshi Kurosawa’s stylish thriller delivers simmering tension and a searing portrait of greed.", streaming: "images/criterion_logo.png" },
  { title: "Ugetsu", year: 1953, image: "images/ugetsu.jpg", poster: "images/ugetsu_poster.jpg", runtime: "96 min", rottenScore: "100%", letterboxdScore: "4.3", description: "16th century peasants pursue riches, honor and a mysterious lady during wartime - Kenji Mizoguchi’s towering classic of world cinema is thought-provoking and richly atmospheric", streaming: "images/criterion_logo.png" },
  { title: "Rashomon", year: 1950, image: "images/rash.jpg", poster: "images/rash_poster.jpg", runtime: "88 min", rottenScore: "98%", letterboxdScore: "4.2", description: "Four people recount different versions of the same crime - Akira Kurosawa’s innovative and thoughtful exploration of reality versus perception", streaming: "images/hbo_logo3.png" },
  { title: "Millennium Actress", year: 2001, image: "images/mil.jpg", poster: "images/mil_poster.jpg", runtime: "87 min", rottenScore: "93%", letterboxdScore: "4.2", description: "The story of an aging actress' personal life unfolds - Satoshi Kon’s sophisticated animation deftly blurs memory and make-believe", streaming: "images/criterion_logo.png" },
  { title: "Plan 75", year: 2022, image: "images/75.jpg", poster: "images/75_poster.jpg", runtime: "113 min", rottenScore: "95%", letterboxdScore: "3.5", description: "In the near future, an elderly woman tries to avoid government-sanctioned euthaniza - Chie Hayakawa’s sensitive and insightful sci-fi explores our relationship with life and death", streaming: "images/criterion_logo.png" },
  { title: "Evil Does Not Exist", year: 2023, image: "images/evil2.jpg", poster: "images/evil_poster.jpg", runtime: "106 min", rottenScore: "91%", letterboxdScore: "3.8", description: "The lives of village inhabitants are disrupted by plans to build a modern campsite in the forest - Ryūsuke Hamaguchi offers an entrancing perspective on the battle between modern civilization and nature", streaming: "images/criterion_logo.png" }
];


films.forEach((film,i)=>calendar.appendChild(createSquare(film,i)));

const modal = document.getElementById('filmModal');
const closeModal = document.getElementById('closeModal');
const modalPoster = document.getElementById('modalPoster');
const modalTitle = document.getElementById('modalTitle');
const modalYear = document.getElementById('modalYear');
const modalDesc = document.getElementById('modalDesc');
const runtimeSpan = document.getElementById('runtime');
const rtSpan = document.getElementById('rtScore');
const lbSpan = document.getElementById('lbScore');

function openModal(film){
  modalPoster.src = film.poster || ""; 
  modalTitle.textContent = film.title || "Untitled";
  modalYear.textContent = film.year ? `(${film.year})` : '';
  modalDesc.textContent = film.description || "";
  runtimeSpan.textContent = film.runtime || "";
  rtSpan.innerHTML = `<img class="icon" src="images/rotten_icon.png"> ${film.rottenScore || ""}`;
  lbSpan.innerHTML = `<img class="icon" src="images/letterboxd_icon.png"> ${film.letterboxdScore || ""}`;
  const streamingDiv = document.getElementById('modalStreaming');
  streamingDiv.innerHTML = film.streaming ? `<img src="${film.streaming}" alt="Streaming">` : "";
  modal.style.display = "flex";
}

closeModal.onclick = () => { modal.style.display = 'none'; };
window.onclick = (e) => { if(e.target === modal) modal.style.display = 'none'; };
document.getElementById('resetBtn').addEventListener('click', ()=>{
  localStorage.removeItem('openedSquaresJP');
  location.reload();
});
</script>
</body>
</html>
